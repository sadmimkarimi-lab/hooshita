// api/eitaa.js  â€” Ø±Ø¨Ø§Øª Ø¨Ø§Ø²ÛŒ Ù‡ÙˆØ´ÛŒØªØ§ Ø¯Ø± Ø§ÛŒØªØ§

const BOT_TOKEN = process.env.EITAA_BOT_TOKEN;
const API_BASE = BOT_TOKEN ? `https://api.eitaa.com/bot${BOT_TOKEN}` : null;

// Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø³Ø§Ø¯Ù‡
async function sendMessage(chat_id, text) {
  if (!API_BASE) {
    console.error("EITAA_BOT_TOKEN is missing");
    return;
  }

  try {
    await fetch(`${API_BASE}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id, text }),
    });
  } catch (err) {
    console.error("Error sending message:", err);
  }
}

/* 
  Ø³Ø§Ø®ØªØ§Ø± Ú©Ù„ÛŒ:
  - Û¶ Ø¨Ø§Ø²ÛŒ (Ù…Ø«Ù„ Ù†Ø³Ø®Ù‡ ÙˆØ¨ Ù‡ÙˆØ´ÛŒØªØ§): Ù‡ÙˆØ´ØŒ ØªÙ…Ø±Ú©Ø²ØŒ Ø¹Ù„Ù…ÛŒØŒ ØªØ§Ø±ÛŒØ®ÛŒâ€ŒÙØ±Ù‡Ù†Ú¯ÛŒØŒ Ø§ÛŒØ«Ø§Ø± Ùˆ Ø§Ø®Ù„Ø§Ù‚ØŒ Ù…Ø°Ù‡Ø¨ÛŒ
  - Ù‡Ø± Ø¨Ø§Ø²ÛŒ Ú†Ù†Ø¯ Ø³Ø¤Ø§Ù„ Ø¯Ø§Ø±Ø¯ (Û²0 Ø³Ø¤Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¨Ø¹Ø¯Ø§ Ø²ÛŒØ§Ø¯Ø´ Ú©Ù†ÛŒ)
  - Ù‡Ø± Ø³Ø¤Ø§Ù„ Û³ Ú¯Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø±Ø¯ Ùˆ ÛŒÚ©ÛŒ Ø¯Ø±Ø³Øª Ø§Ø³Øª (correct = Ø§Ù†Ø¯ÛŒØ³ 0/1/2)
  - Ú©Ø§Ø±Ø¨Ø± /start Ù…ÛŒâ€ŒØ²Ù†Ø¯ â†’ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒ â†’ Ø³Ø¤Ø§Ù„â€ŒÙ‡Ø§ ÛŒÚ©ÛŒâ€ŒÛŒÚ©ÛŒ Ù…ÛŒâ€ŒØ¢ÛŒÙ†Ø¯
  - Ø¬ÙˆØ§Ø¨ Ø¨Ø§ Ø§Ø±Ø³Ø§Ù„ Â«Û±Â» ÛŒØ§ Â«Û²Â» ÛŒØ§ Â«Û³Â»
  - Û³ Ø¬Ø§Ù† (Ù‚Ù„Ø¨). Ø¨Ø§ Ù‡Ø± Ø¬ÙˆØ§Ø¨ ØºÙ„Ø· Û± Ø¬Ø§Ù† Ú©Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯. 
  - Ø§Ú¯Ù‡ Ø¬Ø§Ù†â€ŒÙ‡Ø§ ØªÙ…Ø§Ù… Ø´ÙˆØ¯ØŒ Ø¨Ø§Ø²ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø² Ø§ÙˆÙ„ Ù‡Ù…Ø§Ù† Ø¯Ø³ØªÙ‡ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
  - Ø¨Ø§ ØªÙ…Ø§Ù… Ú©Ø±Ø¯Ù† ÛŒÚ© Ø¨Ø§Ø²ÛŒØŒ Ø¨Ø§Ø²ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§Ø² (Unlock) Ù…ÛŒâ€ŒØ´ÙˆØ¯.
*/

// ---------- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ ----------

const gamesData = [
  {
    id: 1,
    key: "logic",
    title: "Ø¨Ø§Ø²ÛŒ Û± - Ù‡ÙˆØ´ Ùˆ Ù…Ù†Ø·Ù‚",
    description: "Ø³Ø¤Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ Ùˆ Ù…Ù†Ø·Ù‚ÛŒØ› Ø§Ø² Ù…ØªÙˆØ³Ø· ØªØ§ Ø³Ø®Øª.",
    timePerQuestionSec: null, // Ø¯Ø± Ø§ÛŒØªØ§ ÙØ¹Ù„Ø§Ù‹ Ø¨Ø¯ÙˆÙ† ØªØ§ÛŒÙ…Ø±
    stages: [
      { q: "Ø§Ú¯Ø± Û²ØŒÛ´ØŒÛ¶ØŒÛ¸... Ø§Ø¯Ø§Ù…Ù‡ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯ØŒ Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û°", "Û±Û²", "Û¹"], correct: 0 },
      { q: "Ø¹Ø¯Ø¯ Ù…ÛŒØ§Ù†ÛŒ Ø¨ÛŒÙ† Ûµ Ùˆ Û¹ØŸ", options: ["Û´", "Û·", "Û±Û°"], correct: 1 },
      { q: "Ø¬Ù…Ø¹ Û¸ Ùˆ Û·ØŸ", options: ["Û±Ûµ", "Û±Û´", "Û±Û¶"], correct: 0 },
      { q: "Ø¯Ø± Û³ØŒÛ¶ØŒÛ¹ØŒÛ±Û²... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û³", "Û±Ûµ", "Û±Û¸"], correct: 1 },
      { q: "Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡Ù” Û· Ã· Û²ØŸ", options: ["Û±", "Û²", "Û³"], correct: 0 },

      { q: "Ø§Ú¯Ø± x + Û³ = Û· Ø¨Ø§Ø´Ø¯ØŒ Ù…Ù‚Ø¯Ø§Ø± xØŸ", options: ["Û³", "Û´", "Ûµ"], correct: 1 },
      { q: "Ø¯Ø± Ø¯Ù†Ø¨Ø§Ù„Ù‡Ù” Û±Û°ØŒÛ²Û°ØŒÛ³Û°... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û´Û°", "Û³Ûµ", "Û²Ûµ"], correct: 0 },
      { q: "Ú©Ø¯Ø§Ù… Ø¹Ø¯Ø¯ ÙØ±Ø¯ Ø§Ø³ØªØŸ", options: ["Û¸", "Û¹", "Û±Û°"], correct: 1 },
      { q: "Ú©Ø¯Ø§Ù… Ø¹Ø¯Ø¯ Ø²ÙˆØ¬ Ø§Ø³ØªØŸ", options: ["Û±Û±", "Û±Û³", "Û±Û´"], correct: 2 },
      { q: "Ø¹Ø¯Ø¯ Ù…ÛŒØ§Ù†ÛŒ Ø¨ÛŒÙ† Û² Ùˆ Û¸ØŸ", options: ["Û³", "Ûµ", "Û·"], correct: 1 },

      { q: "Ú©Ø¯Ø§Ù… Ø¨Ø²Ø±Ú¯â€ŒØªØ± Ø§Ø³ØªØŸ", options: ["Û²Û³", "Û³Û²", "Û²Û¹"], correct: 1 },
      { q: "Ú©Ø¯Ø§Ù… Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø§Ø³ØªØŸ", options: ["Û´Ûµ", "Û´Û°", "Û³Û¸"], correct: 2 },
      { q: "Ø§Ú¯Ø± Û³ Ã— ? = Û±ÛµØŒ Ø¹Ø¯Ø¯ Ù…Ø¬Ù‡ÙˆÙ„ØŸ", options: ["Ûµ", "Û´", "Û¶"], correct: 0 },
      { q: "Ø¯Ø± ÛµØŒÛ±Û°ØŒÛ²Û°ØŒÛ´Û°... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û¶Û°", "Û¸Û°", "Û·Ûµ"], correct: 1 },
      { q: "Ø¬Ù…Ø¹ Û±Û°ØŒÛ±Û° Ùˆ ÛµØŸ", options: ["Û²Ûµ", "Û²Û°", "Û±Ûµ"], correct: 0 },

      { q: "Ø§Ú¯Ø± Û² ÙˆØ§Ø­Ø¯ Ø§Ø² Û¹ Ú©Ù… Ú©Ù†ÛŒÙ…ØŒ Ø­Ø§ØµÙ„ØŸ", options: ["Û·", "Û¶", "Û¸"], correct: 0 },
      { q: "Ù†ØµÙ Ø¹Ø¯Ø¯ Û±Û¸ØŸ", options: ["Û¹", "Û¸", "Û¶"], correct: 0 },
      { q: "Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø¹Ø¯Ø¯ Û·ØŸ", options: ["Û±Û´", "Û±Û²", "Û±Û¶"], correct: 0 },
      { q: "Ø¯Ø± Û±ØŒÛ³ØŒÛµØŒÛ·... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û¸", "Û¹", "Û±Û±"], correct: 1 },
      { q: "Ø¯Ø± Û²ØŒÛµØŒÛ¸ØŒÛ±Û±... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û³", "Û±Û´", "Û±Ûµ"], correct: 1 }
    ]
  },
  {
    id: 2,
    key: "focus",
    title: "Ø¨Ø§Ø²ÛŒ Û² - ØªÙ…Ø±Ú©Ø² Ùˆ Ø­Ø§ÙØ¸Ù‡",
    description: "Ø§Ù„Ú¯ÙˆÙ‡Ø§ØŒ ØªÚ©Ø±Ø§Ø±Ù‡Ø§ Ùˆ ØªÙØ§ÙˆØªâ€ŒÙ‡Ø§ÛŒ Ø±ÛŒØ²Ø› Ø­ÙˆØ§Ø³Øª Ø±Ùˆ Ø¬Ù…Ø¹ Ú©Ù†.",
    timePerQuestionSec: null,
    stages: [
      { q: "Ø¯Ø± Ø¯Ù†Ø¨Ø§Ù„Ù‡ A, B, C, D... Ø­Ø±Ù Ø¨Ø¹Ø¯ÛŒØŸ", options: ["E", "F", "G"], correct: 0 },
      { q: "Ø¯Ø± Û±ØŒÛ²ØŒÛ±ØŒÛ²... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±", "Û²", "Û³"], correct: 0 },
      { q: "Ø¯Ø± Û²ØŒÛ´ØŒÛ²ØŒÛ´... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û²", "Û´", "Û¶"], correct: 0 },
      { q: "Ø¯Ø± Ø³Ø±Ø®ØŒØ¢Ø¨ÛŒØŒØ³Ø±Ø®ØŒØ¢Ø¨ÛŒ... Ø±Ù†Ú¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ø³Ø¨Ø²", "Ù‚Ø±Ù…Ø²", "Ø²Ø±Ø¯"], correct: 1 },
      { q: "Ø¯Ø± Ø´Ù†Ø¨Ù‡ØŒÛŒÚ©Ø´Ù†Ø¨Ù‡ØŒØ´Ù†Ø¨Ù‡ØŒÛŒÚ©Ø´Ù†Ø¨Ù‡... Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ø´Ù†Ø¨Ù‡", "Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡", "Ø¬Ù…Ø¹Ù‡"], correct: 0 },

      { q: "Ø¯Ø± ÛµØŒÛ·ØŒÛµØŒÛ·... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ûµ", "Û¶", "Û·"], correct: 0 },
      { q: "Ø¯Ø± Û¹ØŒÛ¸ØŒÛ·ØŒÛ¶... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û·", "Ûµ", "Û³"], correct: 1 },
      { q: "Ø¯Ø± Û±ØŒÛ³ØŒÛ±ØŒÛ³ØŒÛ±... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±", "Û³", "Ûµ"], correct: 1 },
      { q: "Ú©Ø¯Ø§Ù… Ø¨Ø§ Ø¨Ù‚ÛŒÙ‡ Ù…ØªÙØ§ÙˆØª Ø§Ø³ØªØŸ", options: ["Ú©ØªØ§Ø¨", "Ø¯ÙØªØ±", "Ø³ÛŒØ¨"], correct: 2 },
      { q: "Ø¯Ø± Ú†Ù¾ØŒØ±Ø§Ø³ØªØŒÚ†Ù¾ØŒØ±Ø§Ø³Øª... Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ú†Ù¾", "ÙˆØ³Ø·", "Ø±Ø§Ø³Øª"], correct: 0 },

      { q: "Ø¯Ø± Û±Û°ØŒÛ²Û°ØŒÛ±Û°ØŒÛ²Û°... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û°", "Û²Û°", "Û³Û°"], correct: 0 },
      { q: "Ø§Ù„Ú¯Ùˆ: Ù…Ø±Ø¨Ø¹ØŒØ¯Ø§ÛŒØ±Ù‡ØŒÙ…Ø±Ø¨Ø¹... Ø´Ú©Ù„ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ù…Ø«Ù„Ø«", "Ø¯Ø§ÛŒØ±Ù‡", "Ù…Ø±Ø¨Ø¹"], correct: 1 },
      { q: "Ø¯Ø± Û±ØŒÛ´ØŒÛ·ØŒÛ±Û°... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û³", "Û±Û²", "Û±Ûµ"], correct: 0 },
      { q: "Ø¯Ø± Û²ØŒÛ³ØŒÛµØŒÛ¸... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û°", "Û±Û±", "Û±Û²"], correct: 2 },
      { q: "Ø¯Ø± Û²ØŒÛ²ØŒÛ³ØŒÛ³... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û³", "Û´", "Û²"], correct: 1 },

      { q: "Ø¯Ø± ØªÙˆØ§Ù„ÛŒ Ø´ØŒÛŒØŒØ´ØŒÛŒ... Ø­Ø±Ù Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ø´", "ÛŒ", "Ø³"], correct: 0 },
      { q: "Ø¯Ø± Ø§Ù„Ú¯ÙˆÛŒ Û±AØŒÛ²AØŒÛ³A... Ù…ÙˆØ±Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û´A", "Û³B", "Û´B"], correct: 0 },
      { q: "Ø¯Ø± ÛµØŒÛ¶ØŒÛ¸ØŒÛ±Û±... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û±Û³", "Û±Ûµ", "Û±Û´"], correct: 1 },
      { q: "Ø¯Ø± Ù‚Ø±Ù…Ø²ØŒÙ‚Ø±Ù…Ø²ØŒØ¢Ø¨ÛŒØŒÙ‚Ø±Ù…Ø²ØŒÙ‚Ø±Ù…Ø²... Ø±Ù†Ú¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Ø¢Ø¨ÛŒ", "Ù‚Ø±Ù…Ø²", "Ø³Ø¨Ø²"], correct: 0 },
      { q: "Ø¯Ø± Û³ØŒÛ³ØŒÛ¶ØŒÛ¶ØŒÛ¹ØŒÛ¹... Ø¹Ø¯Ø¯ Ø¨Ø¹Ø¯ÛŒØŸ", options: ["Û¹", "Û±Û²", "Û¶"], correct: 1 }
    ]
  },
  {
    id: 3,
    key: "science",
    title: "Ø¨Ø§Ø²ÛŒ Û³ - Ø¹Ù„Ù…ÛŒ",
    description: "Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ØŒ Ø²Ù†Ø¯Ú¯ÛŒ Ø±ÙˆØ²Ù…Ø±Ù‡ØŒ Ø·Ø¨ÛŒØ¹Øª Ùˆ Ø¨Ø¯Ù† Ø§Ù†Ø³Ø§Ù†.",
    timePerQuestionSec: null,
    stages: [
      { q:"Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ø³ÛŒØ§Ø±Ù‡ Ø¨Ù‡ Ø®ÙˆØ±Ø´ÛŒØ¯ØŸ", options:["Ø²Ù‡Ø±Ù‡","Ø¹Ø·Ø§Ø±Ø¯","Ù…Ø±ÛŒØ®"], correct:1 },
      { q:"Ø¢Ø¨ Ø¯Ø± Ú†Ù†Ø¯ Ø¯Ø±Ø¬Ù‡ Ø³Ø§Ù†ØªÛŒâ€ŒÚ¯Ø±Ø§Ø¯ Ù…ÛŒâ€ŒØ¬ÙˆØ´Ø¯ØŸ", options:["ÛµÛ°","Û±Û°Û°","Û¸Û°"], correct:1 },
      { q:"ÙˆØ§Ø­Ø¯ Ø·ÙˆÙ„ Ø¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ SIØŸ", options:["Ù…ØªØ±","Ø«Ø§Ù†ÛŒÙ‡","Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…"], correct:0 },
      { q:"Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ú¯Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ù‡ÙˆØ§ØŸ", options:["Ø§Ú©Ø³ÛŒÚ˜Ù†","Ù†ÛŒØªØ±ÙˆÚ˜Ù†","Ù‡Ù„ÛŒÙˆÙ…"], correct:1 },
      { q:"Ù‚Ù„Ø¨ Ø§Ù†Ø³Ø§Ù† Ú†Ù†Ø¯ Ø­ÙØ±Ù‡ Ø¯Ø§Ø±Ø¯ØŸ", options:["Ø¯Ùˆ","Ø³Ù‡","Ú†Ù‡Ø§Ø±"], correct:2 },
      { q:"Ø²Ù…ÛŒÙ† Ø¨Ù‡ Ø¯ÙˆØ± Ú†Ù‡ Ù…ÛŒâ€ŒÚ†Ø±Ø®Ø¯ØŸ", options:["Ù…Ø§Ù‡","Ø®ÙˆØ±Ø´ÛŒØ¯","Ù…Ø±ÛŒØ®"], correct:1 },
      { q:"Ú©Ø¯Ø§Ù… Ø§Ù†Ø¯Ø§Ù… Ø¨Ø±Ø§ÛŒ ØªÙ†ÙØ³ Ø§Ø³ØªØŸ", options:["Ø±ÛŒÙ‡","Ù…Ø¹Ø¯Ù‡","Ú©Ø¨Ø¯"], correct:0 },
      { q:"Ú©Ø¯Ø§Ù… Ø­ÛŒÙˆØ§Ù† Ù¾Ø³ØªØ§Ù†Ø¯Ø§Ø± Ø§Ø³ØªØŸ", options:["Ù…Ø§Ù‡ÛŒ","Ú¯Ø±Ø¨Ù‡","Ù…Ø§Ø±"], correct:1 },
      { q:"Ú¯ÛŒØ§Ù‡ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª ØºØ°Ø§ Ø¨Ù‡ Ú†Ù‡ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ø¯ØŸ", options:["Ù†ÙˆØ± Ùˆ Ø¢Ø¨","Ø·Ù„Ø§","Ù†Ù…Ú©"], correct:0 },
      { q:"Ú©Ø¯Ø§Ù… Ø¯Ø± Ú¯Ø±ÙˆÙ‡ ÙÙ„Ø²Ø§Øª Ø§Ø³ØªØŸ", options:["Ø¢Ù‡Ù†","Ú†ÙˆØ¨","Ø´ÛŒØ´Ù‡"], correct:0 },
      { q:"Ú©Ø¯Ø§Ù… Ø³ÛŒØ§Ø±Ù‡ Â«Ø³ÛŒØ§Ø±Ù‡ Ø³Ø±Ø®Â» Ø§Ø³ØªØŸ", options:["Ù…Ø±ÛŒØ®","Ø²Ø­Ù„","Ù…Ø´ØªØ±ÛŒ"], correct:0 },
      { q:"Ú©Ø¯Ø§Ù… Ø¹Ø¶ÙˆØŒ Ø®ÙˆÙ† Ø±Ø§ Ù¾Ù…Ù¾ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ", options:["Ú©Ø¨Ø¯","Ù‚Ù„Ø¨","Ø±ÛŒÙ‡"], correct:1 },
      { q:"Ø¢Ø¨ Ø¯Ø± Ú†Ù†Ø¯ Ø¯Ø±Ø¬Ù‡ Ø³Ø§Ù†ØªÛŒâ€ŒÚ¯Ø±Ø§Ø¯ ÛŒØ® Ù…ÛŒâ€ŒØ²Ù†Ø¯ØŸ", options:["Û°","Ûµ","Û±Û°"], correct:0 },
      { q:"Ú©Ø¯Ø§Ù…ØŒ Ù…Ù†Ø¨Ø¹ Ø§Ù†Ø±Ú˜ÛŒ ØªØ¬Ø¯ÛŒØ¯Ù¾Ø°ÛŒØ± Ø§Ø³ØªØŸ", options:["Ù†ÙØª","Ø¨Ø§Ø¯","Ø¨Ù†Ø²ÛŒÙ†"], correct:1 },
      { q:"Ù…ØºØ² Ø¯Ø± Ú©Ø¯Ø§Ù… Ù‚Ø³Ù…Øª Ø¨Ø¯Ù† Ø§Ø³ØªØŸ", options:["Ø¬Ù…Ø¬Ù…Ù‡","Ù‚ÙØ³Ù‡ Ø³ÛŒÙ†Ù‡","Ø´Ú©Ù…"], correct:0 },
      { q:"Ø¬Ù‡Øª Ø­Ø±Ú©Øª Ø¹Ù‚Ø±Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¹ØªØŸ", options:["Ø³Ø§Ø¹ØªÚ¯Ø±Ø¯","Ù¾Ø§Ø¯Ø³Ø§Ø¹ØªÚ¯Ø±Ø¯","ØªØµØ§Ø¯ÙÛŒ"], correct:0 },
      { q:"Ú©Ø¯Ø§Ù… ÙˆØ§Ø­Ø¯ Ø²Ù…Ø§Ù† Ø§Ø³ØªØŸ", options:["ÙˆØ§Øª","Ø¯Ù‚ÛŒÙ‚Ù‡","Ù…ØªØ±"], correct:1 },
      { q:"Ú©Ø¯Ø§Ù… Ø­ÛŒÙˆØ§Ù† ØªØ®Ù…â€ŒÚ¯Ø°Ø§Ø± Ø§Ø³ØªØŸ", options:["Ú¯Ø§Ùˆ","Ù…Ø±Øº","Ø³Ú¯"], correct:1 },
      { q:"Ú©Ø¯Ø§Ù…ØŒ Ù…Ø§ÛŒØ¹ Ø¯Ø± Ø¯Ù…Ø§ÛŒ Ø§ØªØ§Ù‚ Ø§Ø³ØªØŸ", options:["Ø³Ù†Ú¯","Ø±ÙˆØºÙ†","ÛŒØ®"], correct:1 },
      { q:"Ú©Ø¯Ø§Ù…ØŒ Ø­Ø³ Ù¾Ù†Ø¬â€ŒÚ¯Ø§Ù†Ù‡ Ú©Ù„Ø§Ø³ÛŒÚ© Ù†ÛŒØ³ØªØŸ", options:["Ú†Ø´Ø§ÛŒÛŒ","Ø¨ÙˆÛŒØ§ÛŒÛŒ","ØªØ¹Ø§Ø¯Ù„"], correct:2 }
    ]
  },
  {
    id: 4,
    key: "history",
    title: "Ø¨Ø§Ø²ÛŒ Û´ - ØªØ§Ø±ÛŒØ®ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ÛŒ",
    description: "Ø§ÛŒØ±Ø§Ù†ØŒ Ù†ÙˆØ±ÙˆØ²ØŒ Ø´Ø¹Ø±ØŒ Ø´Ù‡Ø±Ù‡Ø§ Ùˆ ÙØ±Ù‡Ù†Ú¯.",
    timePerQuestionSec: null,
    stages: [
      {q:"Ù¾Ø§ÛŒØªØ®Øª Ø§ÛŒØ±Ø§Ù†ØŸ",options:["ØªÙ‡Ø±Ø§Ù†","Ø´ÛŒØ±Ø§Ø²","ØªØ¨Ø±ÛŒØ²"],correct:0},
      {q:"Ù†ÙˆØ±ÙˆØ² Ø¢ØºØ§Ø² Ú©Ø¯Ø§Ù… ÙØµÙ„ Ø§Ø³ØªØŸ",options:["Ø¨Ù‡Ø§Ø±","ØªØ§Ø¨Ø³ØªØ§Ù†","Ù¾Ø§ÛŒÛŒØ²"],correct:0},
      {q:"Ø²Ø¨Ø§Ù† Ø±Ø³Ù…ÛŒ Ø§ÛŒØ±Ø§Ù†ØŸ",options:["Ø¹Ø±Ø¨ÛŒ","ÙØ§Ø±Ø³ÛŒ","ØªØ±Ú©ÛŒ"],correct:1},
      {q:"Ø­Ø§ÙØ¸ Ø¨ÛŒØ´ØªØ± Ø¨Ù‡ Ú†Ù‡ Ø´Ù†Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ",options:["Ø´Ø§Ø¹Ø±","Ù†Ù‚Ø§Ø´","Ù…ÙˆØ³ÛŒÙ‚ÛŒâ€ŒØ¯Ø§Ù†"],correct:0},
      {q:"ØªØ®Øª Ø¬Ù…Ø´ÛŒØ¯ Ù†Ø²Ø¯ÛŒÚ© Ú©Ø¯Ø§Ù… Ø´Ù‡Ø± Ø§Ø³ØªØŸ",options:["Ø´ÛŒØ±Ø§Ø²","ØªØ¨Ø±ÛŒØ²","Ù…Ø´Ù‡Ø¯"],correct:0},
      {q:"ÙˆØ§Ù‚Ø¹Ù‡ Ø¹Ø§Ø´ÙˆØ±Ø§ Ø¯Ø± Ú©Ø¬Ø§ Ø±Ø® Ø¯Ø§Ø¯ØŸ",options:["Ú©ÙˆÙÙ‡","Ú©Ø±Ø¨Ù„Ø§","Ù…Ø¯ÛŒÙ†Ù‡"],correct:1},
      {q:"Ù…Ø´Ù‡Ø¯ Ø¨Ù‡ Ú©Ø¯Ø§Ù… Ø§Ù…Ø§Ù… Ù…Ø´Ù‡ÙˆØ± Ø§Ø³ØªØŸ",options:["Ø§Ù…Ø§Ù… Ø±Ø¶Ø§(Ø¹)","Ø§Ù…Ø§Ù… Ø¹Ù„ÛŒ(Ø¹)","Ø§Ù…Ø§Ù… Ø³Ø¬Ø§Ø¯(Ø¹)"],correct:0},
      {q:"Ø²Ø¨Ø§Ù† Ù‚Ø±Ø¢Ù†ØŸ",options:["ÙØ§Ø±Ø³ÛŒ","Ø¹Ø±Ø¨ÛŒ","ØªØ±Ú©ÛŒ"],correct:1},
      {q:"Ú©Ø¯Ø§Ù… Ø´Ø§Ø¹Ø± Ø§ÛŒØ±Ø§Ù†ÛŒ Ø§Ø³ØªØŸ",options:["Ù…ÙˆÙ„ÙˆÛŒ","Ø´Ú©Ø³Ù¾ÛŒØ±","Ú¯ÙˆØªÙ‡"],correct:0},
      {q:"Ú©Ø¯Ø§Ù… Ø±Ù†Ú¯ Ø¯Ø± Ù¾Ø±Ú†Ù… Ø§ÛŒØ±Ø§Ù† Ù†ÛŒØ³ØªØŸ",options:["Ø³Ø¨Ø²","Ø¢Ø¨ÛŒ","Ù‚Ø±Ù…Ø²"],correct:1},
      {q:"Ú©Ø¯Ø§Ù… Ø´Ù‡Ø± Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ù†ÛŒØ³ØªØŸ",options:["Ø§ØµÙÙ‡Ø§Ù†","Ø¨ØºØ¯Ø§Ø¯","Ù‚Ù…"],correct:1},
      {q:"ÛŒØ²Ø¯ Ø¨Ù‡ Ú†Ù‡ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…Ø¹Ø±ÙˆÙ Ø§Ø³ØªØŸ",options:["Ø¨Ø§Ø¯Ú¯ÛŒØ±","Ø¨Ø±Ø¬ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ","Ø¢Ø³Ù…Ø§Ù†â€ŒØ®Ø±Ø§Ø´"],correct:0},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ø¨Ù†Ø§ÛŒ Ù…Ø°Ù‡Ø¨ÛŒ Ù…Ø¹Ø±ÙˆÙ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ø§Ø³ØªØŸ",options:["Ø­Ø±Ù… Ø§Ù…Ø§Ù… Ø±Ø¶Ø§(Ø¹)","Ø¨Ø±Ø¬ Ø§ÛŒÙÙ„","Ø§Ù‡Ø±Ø§Ù… Ù…ØµØ±"],correct:0},
      {q:"Ø§ÛŒØ±Ø§Ù† Ø¯Ø± Ú©Ø¯Ø§Ù… Ù‚Ø§Ø±Ù‡ Ø§Ø³ØªØŸ",options:["Ø¢Ø³ÛŒØ§","Ø§Ø±ÙˆÙ¾Ø§","Ø¢ÙØ±ÛŒÙ‚Ø§"],correct:0},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ø¬Ø´Ù† Ø§ÛŒØ±Ø§Ù†ÛŒ Ø§Ø³ØªØŸ",options:["Ú©Ø±ÛŒØ³Ù…Ø³","Ø´Ø¨ ÛŒÙ„Ø¯Ø§","Ù‡Ø§Ù„ÙˆÙˆÛŒÙ†"],correct:1},
      {q:"Ø®Ø· Ø±ÙˆÛŒ Ø§Ø³Ú©Ù†Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ØŸ",options:["Ù„Ø§ØªÛŒÙ†","Ø¹Ø±Ø¨ÛŒ-ÙØ§Ø±Ø³ÛŒ","Ø¹Ø¨Ø±ÛŒ"],correct:1},
      {q:"Ù…Ø±Ú©Ø² Ø§Ø³ØªØ§Ù† ÙØ§Ø±Ø³ØŸ",options:["Ø´ÛŒØ±Ø§Ø²","Ú©Ø±Ù…Ø§Ù†","Ø§Ø±ÙˆÙ…ÛŒÙ‡"],correct:0},
      {q:"Ú©Ø¯Ø§Ù… Ø³Ø§Ø² Ø§ÛŒØ±Ø§Ù†ÛŒ Ø§Ø³ØªØŸ",options:["ØªØ§Ø±","Ù¾ÛŒØ§Ù†Ùˆ","ÙˆÛŒÙˆÙ„Ù†"],correct:0},
      {q:"Ú©Ø¯Ø§Ù… Ú©Ø´ÙˆØ± Ù‡Ù…Ø³Ø§ÛŒÙ‡ Ø§ÛŒØ±Ø§Ù† Ø§Ø³ØªØŸ",options:["Ú˜Ø§Ù¾Ù†","ØªØ±Ú©ÛŒÙ‡","Ø¨Ø±Ø²ÛŒÙ„"],correct:1},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ø´Ù‡Ø± Ù…Ø°Ù‡Ø¨ÛŒ Ù…Ù‡Ù… Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ø§Ø³ØªØŸ",options:["Ù‚Ù…","Ø¯Ø¨ÛŒ","Ø§Ø³ØªØ§Ù†Ø¨ÙˆÙ„"],correct:0}
    ]
  },
  {
    id: 5,
    key: "ethics",
    title: "Ø¨Ø§Ø²ÛŒ Ûµ - Ø§ÛŒØ«Ø§Ø± Ùˆ Ø§Ø®Ù„Ø§Ù‚",
    description: "Ù…Ù‡Ø±Ø¨Ø§Ù†ÛŒØŒ Ø­Ù‚â€ŒØ§Ù„Ù†Ø§Ø³ØŒ Ø´Ù‡Ø¯Ø§ØŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ØŒ ØµØ¯Ø§Ù‚Øª.",
    timePerQuestionSec: null,
    stages: [
      {q:"Ú©Ù…Ú© Ø¨ÛŒâ€ŒÙ…Ù†Øª Ø¨Ù‡ Ø¯ÛŒÚ¯Ø±Ø§Ù† ÛŒØ¹Ù†ÛŒ:",options:["Ø§ÛŒØ«Ø§Ø±","ØºØ±ÙˆØ±","Ø®Ø´Ù…"],correct:0},
      {q:"Ù¾Ù†Ù‡Ø§Ù†â€ŒÚ©Ø±Ø¯Ù† Ø¹ÛŒØ¨ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ù†Ø´Ø§Ù†Ù‡Ù”:",options:["Ø­ÛŒØ§","ØªØ±Ø³","Ø®ÙˆØ¯Ø®ÙˆØ§Ù‡ÛŒ"],correct:0},
      {q:"Ú¯ÙØªÙ† Ø­Ù‚ÛŒÙ‚ØªØŒ Ø­ØªÛŒ ÙˆÙ‚ØªÛŒ Ø³Ø®Øª Ø§Ø³ØªØŒ ÛŒØ¹Ù†ÛŒ:",options:["ØµØ¯Ø§Ù‚Øª","Ù„Ø¬Ø¨Ø§Ø²ÛŒ","ØªØ­Ù‚ÛŒØ±"],correct:0},
      {q:"Ø¨Ø®Ø´ÛŒØ¯Ù† Ø®Ø·Ø§ÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù†:",options:["Ú©ÛŒÙ†Ù‡","Ø¹ÙÙˆ","Ø§Ù†ØªÙ‚Ø§Ù…"],correct:1},
      {q:"Ú©Ù…Ú© Ø¨Ù‡ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ø¯Ø± Ø¯ÛŒÙ†:",options:["Ú©Ø§Ø± Ø¨ÛŒâ€ŒØ§Ø±Ø²Ø´","Ø¹Ø¨Ø§Ø¯Øª","ØªÙØ±ÛŒØ­"],correct:1},
      {q:"ØºÛŒØ¨Øª ÛŒØ¹Ù†ÛŒ:",options:["ØªØ¹Ø±ÛŒÙâ€ŒÚ©Ø±Ø¯Ù†","Ø¨Ø¯Ú¯ÙˆÛŒÛŒ Ù¾Ø´Øªâ€ŒØ³Ø±","Ø´ÙˆØ®ÛŒ"],correct:1},
      {q:"Ú©Ø¯Ø§Ù… Ø±ÙØªØ§Ø± Ø§Ø®Ù„Ø§Ù‚ÛŒâ€ŒØªØ± Ø§Ø³ØªØŸ",options:["ØªÙ…Ø³Ø®Ø±","Ú¯ÙˆØ´â€ŒØ¯Ø§Ø¯Ù† Ø¨Ø§ Ø§Ø­ØªØ±Ø§Ù…","Ø¨ÛŒâ€ŒØªÙˆØ¬Ù‡ÛŒ"],correct:1},
      {q:"Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø³Ø§Ù„Ù… Ø§Ù…Ø§Ù†ØªØŒ ÛŒØ¹Ù†ÛŒ:",options:["Ø®ÛŒØ§Ù†Øª","Ø§Ù…Ø§Ù†Øªâ€ŒØ¯Ø§Ø±ÛŒ","Ø³Ø§Ø¯Ù‡â€ŒÙ„ÙˆØ­ÛŒ"],correct:1},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ± Ø¨Ù‡ Ø§ÛŒØ«Ø§Ø± Ø§Ø³ØªØŸ",options:["ØªØ±Ø¬ÛŒØ­ Ø®ÙˆØ¯","ØªØ±Ø¬ÛŒØ­ Ø¯ÛŒÚ¯Ø±Ø§Ù†","Ø¨ÛŒâ€ŒØªÙØ§ÙˆØªÛŒ"],correct:1},
      {q:"Ù†Ø¬Ø§Øªâ€ŒØ¯Ø§Ø¯Ù† Ø¬Ø§Ù† Ø¯ÛŒÚ¯Ø±Ø§Ù†:",options:["Ú©Ø§Ø± Ø¹Ø§Ø¯ÛŒ","ÙØ¯Ø§Ú©Ø§Ø±ÛŒ","Ø´ÙˆØ®ÛŒ"],correct:1},
      {q:"Ø³Ø± Ø²Ø¯Ù† Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø±:",options:["Ø§ØªÙ„Ø§Ù ÙˆÙ‚Øª","Ø«ÙˆØ§Ø¨","Ù…Ø²Ø§Ø­Ù…Øª"],correct:1},
      {q:"Ø¯Ø±ÙˆØºÙ Ù…Ú©Ø±Ø± Ø¨Ø§Ø¹Ø«:",options:["Ø§Ø¹ØªÙ…Ø§Ø¯","Ø¨ÛŒâ€ŒØ§Ø¹ØªÙ…Ø§Ø¯ÛŒ","Ù…Ø­Ø¨Øª"],correct:1},
      {q:"Ø­Ù‚â€ŒØ§Ù„Ù†Ø§Ø³ ÛŒØ¹Ù†ÛŒ:",options:["Ø­Ù‚ Ø·Ø¨ÛŒØ¹Øª","Ø­Ù‚ Ù…Ø±Ø¯Ù…","Ø­Ù‚ Ø­ÛŒÙˆØ§Ù†Ø§Øª"],correct:1},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ù…ØµØ¯Ø§Ù‚ Ø§Ø­ØªØ±Ø§Ù… Ø§Ø³ØªØŸ",options:["Ù‚Ø·Ø¹ Ø­Ø±Ù Ø¯ÛŒÚ¯Ø±Ø§Ù†","Ø³Ù„Ø§Ù…â€ŒÚ©Ø±Ø¯Ù†","Ø¨ÛŒâ€ŒØ¬ÙˆØ§Ø¨ Ú¯Ø°Ø§Ø´ØªÙ†"],correct:1},
      {q:"ÙØ±ÛŒØ§Ø¯Ø²Ø¯Ù† Ø¨Ø± ÙˆØ§Ù„Ø¯ÛŒÙ†:",options:["Ø¹Ø§Ø¯ÛŒ","Ø¨ÛŒâ€ŒØ§Ø¯Ø¨ÛŒ","Ø´Ø¬Ø§Ø¹Øª"],correct:1},
      {q:"Ø¨Ø®Ø´Ø´ Ù…Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø±Ø¶Ø§ÛŒ Ø®Ø¯Ø§:",options:["Ø±ÛŒØ§","ØµØ¯Ù‚Ù‡","Ø®Ø³Ø§Ø³Øª"],correct:1},
      {q:"Ú©Ù…Ú© Ø¨Ù‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø´Ù‡Ø¯Ø§:",options:["Ø¨ÛŒâ€ŒÙØ§ÛŒØ¯Ù‡","Ù‚Ø¯Ø±Ø¯Ø§Ù†ÛŒ","Ø§Ø´ØªØ¨Ø§Ù‡"],correct:1},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ø§Ø¯Ø¨ Ø¯Ø± Ú¯ÙØªØ§Ø± Ø§Ø³ØªØŸ",options:["ØªÙˆÙ‡ÛŒÙ†","Ø³Ø¤Ø§Ù„ Ù…Ø­ØªØ±Ù…Ø§Ù†Ù‡","Ù…Ø³Ø®Ø±Ù‡â€ŒÚ©Ø±Ø¯Ù†"],correct:1},
      {q:"Ø¢Ø¨Ø±Ùˆ Ø¨Ø±Ø¯Ù† Ø¯ÛŒÚ¯Ø±Ø§Ù†:",options:["Ú¯Ù†Ø§Ù‡","Ø´ÙˆØ®ÛŒ","Ø´Ø¬Ø§Ø¹Øª"],correct:0},
      {q:"Ø³Ø§Ú©Øªâ€ŒÙ…Ø§Ù†Ø¯Ù† Ùˆ ØªØ£ÛŒÛŒØ¯ ØºÛŒØ¨Øª:",options:["ØªØ£ÛŒÛŒØ¯ Ø¶Ù…Ù†ÛŒ","Ù…Ø¨Ø§Ø±Ø²Ù‡","Ù†ØµÛŒØ­Øª"],correct:0}
    ]
  },
  {
    id: 6,
    key: "religion",
    title: "Ø¨Ø§Ø²ÛŒ Û¶ - Ù…Ø°Ù‡Ø¨ÛŒ (Ø´ÛŒØ¹Ù‡)",
    description: "Ø³Ø¤Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ Ø§Ø² Ù‚Ø±Ø¢Ù† Ùˆ Ø§Ù‡Ù„â€ŒØ¨ÛŒØª(Ø¹).",
    timePerQuestionSec: null,
    stages: [
      {q:"Ú©ØªØ§Ø¨ Ø¢Ø³Ù…Ø§Ù†ÛŒ Ù…Ø³Ù„Ù…Ø§Ù†Ø§Ù†:",options:["Ù‚Ø±Ø¢Ù†","ØªÙˆØ±Ø§Øª","Ø§Ù†Ø¬ÛŒÙ„"],correct:0},
      {q:"Ù…Ø§Ù‡ Ø±ÙˆØ²Ù‡â€ŒØ¯Ø§Ø±ÛŒ:",options:["Ø±Ù…Ø¶Ø§Ù†","Ù…Ø­Ø±Ù…","Ø±Ø¬Ø¨"],correct:0},
      {q:"Ù‚Ø¨Ù„Ù‡Ù” Ù…Ø³Ù„Ù…Ø§Ù†Ø§Ù†:",options:["Ú©Ø¹Ø¨Ù‡","Ù…Ø³Ø¬Ø¯Ø§Ù„Ø§Ù‚ØµÛŒ","Ù…Ø¯ÛŒÙ†Ù‡"],correct:0},
      {q:"Ø§Ù…Ø§Ù… Ø¹Ù„ÛŒ(Ø¹) Ú†Ù†Ø¯Ù…ÛŒÙ† Ø§Ù…Ø§Ù… Ø´ÛŒØ¹Ù‡ Ø§Ø³ØªØŸ",options:["Ø§ÙˆÙ„","Ø¯ÙˆÙ…","Ø³ÙˆÙ…"],correct:0},
      {q:"Ø´Ù‡Ø§Ø¯Øª Ø§Ù…Ø§Ù… Ø­Ø³ÛŒÙ†(Ø¹) Ø¯Ø± Ø±ÙˆØ²:",options:["Ø¹Ø±ÙÙ‡","Ø¹Ø§Ø´ÙˆØ±Ø§","ØºØ¯ÛŒØ±"],correct:1},
      {q:"Ø§Ù…Ø§Ù… Ø±Ø¶Ø§(Ø¹) Ø¯Ø± Ú©Ø¯Ø§Ù… Ø´Ù‡Ø± Ù…Ø¯ÙÙˆÙ† Ø§Ø³ØªØŸ",options:["Ù‚Ù…","Ù…Ø´Ù‡Ø¯","Ú©Ø±Ø¨Ù„Ø§"],correct:1},
      {q:"Ø§Ù…Ø§Ù… Ø²Ù…Ø§Ù†(Ø¹Ø¬) ÙØ±Ø²Ù†Ø¯ Ú©Ø¯Ø§Ù… Ø§Ù…Ø§Ù… Ø§Ø³ØªØŸ",options:["Ø§Ù…Ø§Ù… Ù‡Ø§Ø¯ÛŒ(Ø¹)","Ø§Ù…Ø§Ù… Ø¹Ø³Ú©Ø±ÛŒ(Ø¹)","Ø§Ù…Ø§Ù… Ø¬ÙˆØ§Ø¯(Ø¹)"],correct:1},
      {q:"ØºØ¯ÛŒØ± Ø®Ù… Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÙˆÙ„Ø§ÛŒØª Ú†Ù‡ Ú©Ø³ÛŒ Ø§Ø³ØªØŸ",options:["Ø§Ù…Ø§Ù… Ø­Ø³ÛŒÙ†(Ø¹)","Ø§Ù…Ø§Ù… Ø¹Ù„ÛŒ(Ø¹)","Ø§Ù…Ø§Ù… Ø¬ÙˆØ§Ø¯(Ø¹)"],correct:1},
      {q:"Ù†Ù…Ø§Ø² ÙˆØ§Ø¬Ø¨ Ø±ÙˆØ²Ø§Ù†Ù‡ Ú†Ù†Ø¯ Ø±Ú©Ø¹Øª Ø§Ø³ØªØŸ",options:["Û±Û·","Û±Û±","Û±Û¹"],correct:0},
      {q:"Ú©Ø¯Ø§Ù…ØŒ ÛŒÚ© Ù†Ù…Ø§Ø² ÙˆØ§Ø¬Ø¨ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ø³ØªØŸ",options:["ØµØ¨Ø­","ÙˆØªØ±","Ø¹ÛŒØ¯"],correct:0},
      {q:"Ú©Ø¯Ø§Ù…ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ø§Ø±Ú©Ø§Ù† Ø§Ø³Ù„Ø§Ù… Ø§Ø³ØªØŸ",options:["Ù†Ù…Ø§Ø²","Ù„Ø¨Ø§Ø³","Ø³ÙØ±"],correct:0},
      {q:"Ø²Ú©Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡:",options:["Ø§Ù…ÙˆØ§Ù„","Ø±Ù†Ú¯","ØºØ°Ø§"],correct:0},
      {q:"Ø­Ø¬ Ø¯Ø± Ú©Ø¯Ø§Ù… Ù…Ø§Ù‡ Ù‚Ù…Ø±ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ",options:["Ø±Ù…Ø¶Ø§Ù†","Ø°ÛŒâ€ŒØ§Ù„Ø­Ø¬Ù‡","ØµÙØ±"],correct:1},
      {q:"Ø³Ù„Ø§Ù…â€ŒØ¯Ø§Ø¯Ù† Ø¯Ø± Ù¾Ø§ÛŒØ§Ù† Ù†Ù…Ø§Ø²:",options:["Ù†Ù…Ø§Ø² Ø±Ø§ ØªÙ…Ø§Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯","Ù†Ù…Ø§Ø² Ø±Ø§ Ø¨Ø§Ø·Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯","Ù‡ÛŒÚ† Ù†Ù‚Ø´ÛŒ Ù†Ø¯Ø§Ø±Ø¯"],correct:0},
      {q:"Ø¯Ø¹Ø§ ÛŒØ¹Ù†ÛŒ:",options:["Ø­Ø±Ùâ€ŒØ²Ø¯Ù† Ø¨Ø§ Ø®Ø¯Ø§","ØµØ­Ø¨Øª Ø¨Ø§ Ù…Ø±Ø¯Ù…","ØªÙØ±ÛŒØ­"],correct:0},
      {q:"Ø²ÛŒØ§Ø±Øª Ú©Ø±Ø¨Ù„Ø§ Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ:",options:["ØªÙØ±ÛŒØ­","ØªÙ‚ÙˆÛŒØª Ù…Ø­Ø¨Øª Ø§Ù‡Ù„â€ŒØ¨ÛŒØª(Ø¹)","Ø®Ø±ÛŒØ¯"],correct:1},
      {q:"Ú©Ø¯Ø§Ù… Ø¹Ù…Ù„ØŒ Ù…Ø³ØªØ­Ø¨ Ø§Ø³ØªØŸ",options:["Ú©Ù…Ú© Ø¨Ù‡ Ø¯ÛŒÚ¯Ø±Ø§Ù†","Ø¸Ù„Ù…","ØºÛŒØ¨Øª"],correct:0},
      {q:"Ø±ÙˆØ²Ù‡ ÛŒØ¹Ù†ÛŒ:",options:["ØªØ±Ú© Ø®ÙˆØ±Ø¯Ù† Ùˆ Ø¢Ø´Ø§Ù…ÛŒØ¯Ù† Ø¨Ø±Ø§ÛŒ Ø®Ø¯Ø§","Ú©Ù…â€ŒØ®ÙˆØ±ÛŒ Ù…Ø¹Ù…ÙˆÙ„ÛŒ","Ú©Ù…â€ŒØ®ÙˆØ§Ø¨ÛŒØ¯Ù†"],correct:0},
      {q:"Ú©Ø¯Ø§Ù…ØŒ Ø§Ø² Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø±Ø¢Ù† Ø§Ø³ØªØŸ",options:["ÙØ±Ù‚Ø§Ù†","Ø§Ù†Ø¬ÛŒÙ„","Ø²Ø¨ÙˆØ±"],correct:0},
      {q:"Ú©Ø¯Ø§Ù…ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø³Ø§Ø¬Ø¯ Ù…Ù‡Ù… Ø§Ø³Ù„Ø§Ù…ÛŒ Ø§Ø³ØªØŸ",options:["Ù…Ø³Ø¬Ø¯Ø§Ù„Ø­Ø±Ø§Ù…","Ú©Ù„ÛŒØ³Ø§ÛŒ Ù†ÙˆØªØ±Ø¯Ø§Ù…","Ù…Ø¹Ø¨Ø¯ Ø¨ÙˆØ¯Ø§"],correct:0}
    ]
  }
];

// ---------- Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø´Ù†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú†Øª ----------

const sessions = {}; // key = chatId

function getOrCreateSession(chatId) {
  if (!sessions[chatId]) {
    sessions[chatId] = {
      state: "idle",           // idle | choosingGame | inGame
      currentGameId: null,
      currentQuestionIndex: 0,
      hearts: 3,
      totalStars: 0,
      gameStars: 0,
      unlockedGameIds: [1]     // Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ ÙÙ‚Ø· Ø¨Ø§Ø²ÛŒ Û± Ø¨Ø§Ø² Ø§Ø³Øª
    };
  }
  return sessions[chatId];
}

// ---------- Ù„Ø§Ø¬ÛŒÚ© Ø±Ø¨Ø§Øª ----------

async function handleMessage(message) {
  const chatId = message.chat.id;
  const text = (message.text || "").trim();

  const session = getOrCreateSession(chatId);

  // Ø¯Ø³ØªÙˆØ±Ø§Øª Ù¾Ø§ÛŒÙ‡
  if (text === "/start") {
    Object.assign(session, {
      state: "choosingGame",
      currentGameId: null,
      currentQuestionIndex: 0,
      hearts: 3,
      gameStars: 0,
      // totalStars Ø±Ø§ ØµÙØ± Ù†Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ÛŒ Ø¨Ù…Ø§Ù†Ø¯
      unlockedGameIds: session.unlockedGameIds.length ? session.unlockedGameIds : [1]
    });

    await sendMessage(
      chatId,
      "Ø³Ù„Ø§Ù… ğŸ‘‹\nØ¨Ù‡ Ø¨Ø§Ø²ÛŒ Ù‡ÙˆØ´ÛŒØªØ§ Ø¯Ø± Ø§ÛŒØªØ§ Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ.\n\n" +
      "Ø¯Ø± Ù‡Ø± Ø¨Ø§Ø²ÛŒØŒ Ú†Ù†Ø¯ Ø³Ø¤Ø§Ù„ ØªØ³ØªÛŒ Û³ Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±ÛŒ.\n" +
      "Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø³Ø¤Ø§Ù„ØŒ ÙÙ‚Ø· Ø¹Ø¯Ø¯ Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø¨ÙØ±Ø³Øª (Û± ÛŒØ§ Û² ÛŒØ§ Û³).\n" +
      "Ù‡Ø± Ø¬ÙˆØ§Ø¨ Ø¯Ø±Ø³Øª = Û± Ø³ØªØ§Ø±Ù‡ â­\nÙ‡Ø± Ø¬ÙˆØ§Ø¨ ØºÙ„Ø· = Û± Ø¬Ø§Ù† Ø§Ø² Ø¯Ø³Øª Ù…ÛŒâ€ŒØ¯ÛŒ â¤ï¸\n\n" +
      "Ø§ÙˆÙ„ ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†:\n" + gamesListText(session)
    );
    return;
  }

  if (text === "/games") {
    session.state = "choosingGame";
    session.currentGameId = null;
    await sendMessage(chatId, "Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§Øª:\n" + gamesListText(session) + "\n\nØ¹Ø¯Ø¯ Ø¨Ø§Ø²ÛŒ Ø±Ùˆ Ø¨ÙØ±Ø³Øª (Ù…Ø«Ù„Ø§Ù‹ Û±).");
    return;
  }

  if (text === "/status") {
    await sendMessage(
      chatId,
      `ğŸ“Š ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ:\n` +
      `Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„: ${session.totalStars}\n` +
      `Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²: ${session.unlockedGameIds.join("ØŒ ")}\n` +
      (session.currentGameId
        ? `Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø²ÛŒ: ${gameById(session.currentGameId).title}\n` +
          `Ø³Ø¤Ø§Ù„ Ø´Ù…Ø§Ø±Ù‡ ${session.currentQuestionIndex + 1}`
        : "Ø§Ù„Ø§Ù† Ø¯Ø± Ù…Ù†ÙˆÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒ Ù‡Ø³ØªÛŒ.")
    );
    return;
  }

  if (text === "/menu") {
    session.state = "choosingGame";
    session.currentGameId = null;
    await sendMessage(chatId, "Ø¨Ø±Ú¯Ø´ØªÛŒ Ø¨Ù‡ ÙÙ‡Ø±Ø³Øª Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§.\n" + gamesListText(session));
    return;
  }

  // Ø§Ú¯Ø± Ù…Ù†ØªØ¸Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒ Ù‡Ø³ØªÛŒÙ…
  if (session.state === "choosingGame") {
    const gameNumber = parseInt(text, 10);
    if (Number.isNaN(gameNumber)) {
      await sendMessage(chatId, "Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒØŒ ÙÙ‚Ø· Ø¹Ø¯Ø¯Ø´ Ø±Ø§ Ø¨ÙØ±Ø³Øª (Ù…Ø«Ù„Ø§Ù‹ Û± ÛŒØ§ Û²).");
      return;
    }

    const game = gameById(gameNumber);
    if (!game) {
      await sendMessage(chatId, "Ú†Ù†ÛŒÙ† Ø¨Ø§Ø²ÛŒâ€ŒØ§ÛŒ Ù†Ø¯Ø§Ø±ÛŒÙ…. ÛŒÚ©ÛŒ Ø§Ø² Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù„ÛŒØ³Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.");
      return;
    }

    if (!session.unlockedGameIds.includes(gameNumber)) {
      await sendMessage(chatId, "Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ù‡Ù†ÙˆØ² Ø¨Ø±Ø§Øª Ø¨Ø§Ø² Ù†Ø´Ø¯Ù‡. Ø§ÙˆÙ„ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø±Ùˆ ØªÙ…Ø§Ù… Ú©Ù†.");
      return;
    }

    // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
    session.state = "inGame";
    session.currentGameId = gameNumber;
    session.currentQuestionIndex = 0;
    session.hearts = 3;
    session.gameStars = 0;

    await sendMessage(
      chatId,
      `ğŸ’¥ Ø´Ø±ÙˆØ¹ ${game.title}\n${game.description}\n\n` +
      "Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø³Ø¤Ø§Ù„ØŒ Ø¹Ø¯Ø¯ Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø¨ÙØ±Ø³Øª (Û± ÛŒØ§ Û² ÛŒØ§ Û³).\n\n" +
      "Ø¨Ø±ÛŒÙ… Ø³Ø±Ø§Øº Ø³Ø¤Ø§Ù„ Ø§ÙˆÙ„:"
    );

    await sendCurrentQuestion(chatId, session);
    return;
  }

  // Ø§Ú¯Ø± Ø¯Ø§Ø®Ù„ Ø¨Ø§Ø²ÛŒ Ù‡Ø³ØªÛŒÙ… â†’ Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø§Ø³Ø®
  if (session.state === "inGame" && session.currentGameId) {
    // Ø¬ÙˆØ§Ø¨ Ø¨Ø§ÛŒØ¯ Û± ÛŒØ§ Û² ÛŒØ§ Û³ Ø¨Ø§Ø´Ø¯
    const answerIndex = parseInt(text, 10) - 1; // Ú†ÙˆÙ† Ú©Ø§Ø±Ø¨Ø± Û±/Û²/Û³ Ù…ÛŒâ€ŒÙØ±Ø³ØªØ¯
    if (![0, 1, 2].includes(answerIndex)) {
      await sendMessage(chatId, "Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø®ØŒ ÙÙ‚Ø· Ø¹Ø¯Ø¯ Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø¨ÙØ±Ø³Øª (Û±ØŒ Û² ÛŒØ§ Û³).");
      return;
    }

    await handleAnswer(chatId, session, answerIndex);
    return;
  }

  // Ø§Ú¯Ø± Ù‡ÛŒÚ† Ú©Ø¯Ø§Ù… Ù†Ø¨ÙˆØ¯ØŒ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©ÙˆØªØ§Ù‡
  await sendMessage(
    chatId,
    "Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ /start Ø±Ø§ Ø¨ÙØ±Ø³Øª.\nØ¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ù„ÛŒØ³Øª Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§: /games\nØ¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† ÙˆØ¶Ø¹ÛŒØª: /status"
  );
}

// ---------- ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø§Ø²ÛŒ ----------

function gameById(id) {
  return gamesData.find(g => g.id === id) || null;
}

function gamesListText(session) {
  // Ù„ÛŒØ³Øª Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ù‚ÙÙ„/Ø¨Ø§Ø² Ø¨ÙˆØ¯Ù†
  const lines = gamesData.map(g => {
    const unlocked = session.unlockedGameIds.includes(g.id);
    const status = unlocked ? "âœ… Ø¨Ø§Ø²" : "ğŸ”’ Ù‚ÙÙ„";
    return `${g.id}) ${g.title}  (${status})`;
  });
  return lines.join("\n");
}

async function sendCurrentQuestion(chatId, session) {
  const game = gameById(session.currentGameId);
  if (!game) {
    await sendMessage(chatId, "Ø¨Ø§Ø²ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±. /start Ø±Ø§ Ø¨ÙØ±Ø³Øª ØªØ§ Ø§Ø² Ù†Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ….");
    session.state = "choosingGame";
    session.currentGameId = null;
    return;
  }

  const index = session.currentQuestionIndex;
  if (index >= game.stages.length) {
    // Ù‡Ù…Ù‡Ù” Ø³Ø¤Ø§Ù„â€ŒÙ‡Ø§ ØªÙ…Ø§Ù… Ø´Ø¯Ù‡
    await finishGame(chatId, session, game);
    return;
  }

  const stage = game.stages[index];
  const qText =
    `Ø³Ø¤Ø§Ù„ ${index + 1} Ø§Ø² ${game.stages.length}\n` +
    `â¤ï¸ Ø¬Ø§Ù†â€ŒÙ‡Ø§: ${session.hearts}\n` +
    `â­ Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ: ${session.gameStars}\n\n` +
    `â“ ${stage.q}\n\n` +
    `Û±) ${stage.options[0]}\n` +
    `Û²) ${stage.options[1]}\n` +
    `Û³) ${stage.options[2]}`;

  await sendMessage(chatId, qText);
}

async function handleAnswer(chatId, session, answerIndex) {
  const game = gameById(session.currentGameId);
  if (!game) {
    await sendMessage(chatId, "Ø¨Ø§Ø²ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±. /start Ø±Ø§ Ø¨ÙØ±Ø³Øª.");
    session.state = "choosingGame";
    session.currentGameId = null;
    return;
  }

  const index = session.currentQuestionIndex;
  if (index >= game.stages.length) {
    await finishGame(chatId, session, game);
    return;
  }

  const stage = game.stages[index];
  const correctIndex = stage.correct;

  if (answerIndex === correctIndex) {
    // Ø¬ÙˆØ§Ø¨ Ø¯Ø±Ø³Øª
    session.gameStars += 1;
    session.totalStars += 1;
    session.currentQuestionIndex += 1;

    await sendMessage(
      chatId,
      "âœ… Ø¢ÙØ±ÛŒÙ†! Ø¬ÙˆØ§Ø¨ Ø¯Ø±Ø³Øª Ø¨ÙˆØ¯.\n" +
      `â­ Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ: ${session.gameStars}\n` +
      `â­ Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„: ${session.totalStars}\n\n` +
      (session.currentQuestionIndex < game.stages.length
        ? "Ø¨Ø±ÛŒÙ… Ø³Ø±Ø§Øº Ø³Ø¤Ø§Ù„ Ø¨Ø¹Ø¯ÛŒ ğŸ‘‡"
        : "Ø§ÛŒÙ† Ø¢Ø®Ø±ÛŒÙ† Ø³Ø¤Ø§Ù„ Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø¨ÙˆØ¯ØŒ Ø¨Ø±ÛŒÙ… Ù†ØªÛŒØ¬Ù‡ Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒÙ…...")
    );

    await sendCurrentQuestion(chatId, session);
  } else {
    // Ø¬ÙˆØ§Ø¨ ØºÙ„Ø·
    session.hearts -= 1;

    if (session.hearts <= 0) {
      // Ø¨Ø§Ø®Øª Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒØŒ Ø§Ø² Ø§ÙˆÙ„ Ù‡Ù…ÛŒÙ† Ø¨Ø§Ø²ÛŒ
      await sendMessage(
        chatId,
        "âŒ Ø§ÛŒÙ† Ø¬ÙˆØ§Ø¨ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨ÙˆØ¯ Ùˆ Ø¬Ø§Ù†â€ŒÙ‡Ø§Øª ØªÙ…ÙˆÙ… Ø´Ø¯.\n" +
        "Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø§Ø² Ø§ÙˆÙ„ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡.\n\n" +
        "Ø§Ú¯Ù‡ Ø®ÙˆØ§Ø³ØªÛŒ Ø¨Ø§Ø²ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØŒ /games Ø±Ø§ Ø¨ÙØ±Ø³Øª."
      );
      // Ø±ÛŒØ³Øª ÙÙ‚Ø· Ù‡Ù…ÛŒÙ† Ø¨Ø§Ø²ÛŒ
      session.state = "choosingGame";
      session.currentGameId = null;
      session.currentQuestionIndex = 0;
      session.gameStars = 0;
    } else {
      await sendMessage(
        chatId,
        "âŒ Ø§ÛŒÙ† Ø¬ÙˆØ§Ø¨ Ø¯Ø±Ø³Øª Ù†Ø¨ÙˆØ¯.\n" +
        `â¤ï¸ Ø¬Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: ${session.hearts}\n\n` +
        "Ù‡Ù…ÛŒÙ† Ø³Ø¤Ø§Ù„ Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ø§ Ø¯Ù‚Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¬ÙˆØ§Ø¨ Ø¨Ø¯Ù‡:"
      );
      // Ù‡Ù…Ø§Ù† Ø³Ø¤Ø§Ù„ØŒ ÙÙ‚Ø· Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù¾Ø±Ø³ÛŒØ¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
      await sendCurrentQuestion(chatId, session);
    }
  }
}

async function finishGame(chatId, session, game) {
  // Ù¾Ø§ÛŒØ§Ù† ÛŒÚ© Ø¨Ø§Ø²ÛŒ
  const stars = session.gameStars;

  await sendMessage(
    chatId,
    `ğŸ‰ Ø¨Ø§Ø²ÛŒ Â«${game.title}Â» ØªÙ…Ø§Ù… Ø´Ø¯.\n` +
    `â­ Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ: ${stars}\n` +
    `â­ Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ ØªÙˆ: ${session.totalStars}\n`
  );

  // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¨Ø§Ø²ÛŒ Ø¨Ø¹Ø¯ÛŒ (Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯)
  const currentIndex = gamesData.findIndex(g => g.id === game.id);
  if (currentIndex >= 0 && currentIndex < gamesData.length - 1) {
    const nextGame = gamesData[currentIndex + 1];
    if (!session.unlockedGameIds.includes(nextGame.id)) {
      session.unlockedGameIds.push(nextGame.id);
      await sendMessage(
        chatId,
        `ØªØ¨Ø±ÛŒÚ©! ğŸŠ\nØ¨Ø§Ø²ÛŒ Ø¨Ø¹Ø¯ÛŒ Ù‡Ù… Ø¨Ø±Ø§Øª Ø¨Ø§Ø² Ø´Ø¯:\n${nextGame.id}) ${nextGame.title}\n` +
        "Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯ØŒ /games Ø±Ø§ Ø¨ÙØ±Ø³Øª."
      );
    } else {
      await sendMessage(
        chatId,
        "Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù‡Ù…ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø±Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒ ÛŒØ§ Ø§Ø² /games ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ø¯ÛŒÚ¯Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒ."
      );
    }
  } else {
    await sendMessage(
      chatId,
      "ØªÙˆ Ù‡Ù…Ù‡Ù” Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ÛŒØªØ§ Ø±Ùˆ ØªÙ…ÙˆÙ… Ú©Ø±Ø¯ÛŒ ğŸ‘‘\nÙ‚Ù‡Ø±Ù…Ø§Ù† Ø´Ø¯ÛŒ! Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø² /start Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒ."
    );
  }

  // Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§Ø²ÛŒ
  session.state = "choosingGame";
  session.currentGameId = null;
  session.currentQuestionIndex = 0;
  session.gameStars = 0;
  session.hearts = 3;
}

// ---------- Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± route API ----------

export { sendMessage, handleMessage };
